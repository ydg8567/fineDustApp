extends ../layout

block content
    script.
        const editFunction = (nums) => {
            const password = document.getElementById("password").value;
            const title = document.getElementById("title").value;
            const content = document.getElementById("content").value;

            $.ajax({
                url: "/editBoard/api/edit",
                data: JSON.stringify({
                        "nums": nums,
                        "password": password,
                        "title": title,
                        "content": content
                }),
                type: "post",
                dateType: "html",
                contentType: "application/json",

                success: (result) => {
                    if(result == 'editSuccess') {
                        alert("글 수정 완료.");
                        location.href = '/Board';
                    } else if( result == 'wrongPassword') {
                        alert("비밀번호가 틀렸습니다.");
                    }
                    console.log(result)
                },
                error: (err) => {
                    console.log(err)
                }
            })
        }

        const outToThisPage = () => {
            location.href = '/board';
        }

    p( style="margin-top: 3%; font-size: 30px; text-align: center") 게시글 수정
    table#addBoardTable(class = "table table-bordered" style = "margin-left: auto; margin-right: auto; margin-top:1%; line-height: 1.5; width: 33%;")
        each map in boardDatas
            thead
                tr
                    td(style='background: #f3f6f7; width: 20%') 작성자
                    td(style='padding: 10px; width: 80%') #{map.autor}
                tr
                    td(style='background: #f3f6f7') 제목
                    td(style='padding: 10px')
                        input.text-input#title(type='text' style="width: 100%" value=map.title)
            tbody
                tr
                    td(style='background: #f3f6f7') 내용
                    td(style='padding: 10px; height: 300px')
                        textarea.textarea#content(placeholder='내용' style='width: 100%; height: 300px;') #{map.content}

                tr
                    td(colspan="2" style="margin-right:10%; text-align: right")
                        input.text-input#password(type='password' placeholder='비밀번호' class="mr-2" style="width: 140px")
                        button(type="button" class='btn btn-primary mr-2' onclick='editFunction(' + map.nums + ')') 글 수정
                        button(type="button" class='btn btn-primary mr-2' onclick='outToThisPage()') 취 소